## 2020春FZU软工实践疫情统计示例程序


# 疫情统计

最近新型冠状病毒疫情严重，全国人民都感到担忧，迫切希望能够及时了解到病毒最新的情况，作为IT学子，大家请你帮忙开发一个疫情统计程序。

## 疫情统计程序的需求文档：

假设有一家统计网站**每天**都会提供**一个**对应的日志文本，记录国内各省前一天的感染情况，如它2020-01-23发布的日志文本可能长这样：

```
福建 新增 感染患者 23人
福建 新增 疑似患者 2人
浙江 感染患者 流入 福建 12人
湖北 疑似患者 流入 福建 2人
安徽 死亡 2人
新疆 治愈 3人
// 该文档并非真实数据，仅供测试使用
```
该日志中出现以下几种情况：
1、<省> 新增 感染患者 n人
2、<省> 新增 疑似患者 n人
3、<省1> 感染患者 流入 <省2> n人
4、<省1> 疑似患者 流入 <省2> n人
5、<省> 死亡 n人
6、<省> 治愈 n人

PS：
- 日志中各种情况的出现顺序不定，省出现的顺序不定，出现哪些省不定，省出现几次不定。
- 该日志文件的命名遵守对应的规范： `年-月-日.log.txt` ，如`2020-01-22.log.txt`。
- 文件日期并不一定连续，若某天的日志缺失，默认为该天的情况没有变化。认为`-date`日期提供的最早一天的- - 前一天不存在任何感染情况。如只提供`2020-01-23，2020-01-25`则可认为`2020-01-24`增长变化都为0。`-date`不会提供在日志最晚一天后的日期，若提供应给与`日期超出范围`错误提示。

现在请你撰写程序，**读取传入的log目录下的所有日志**，来实现**需求**
```
  ...\
      \--log
        \--2020-01-22.log.txt
        \--2020-01-23.log.txt
```

### 1、早期需求（50%）：
#### （1）需要你的程序能够列出全国和各省在某日的感染情况：
命令行（win+r cmd）cd到项目src下，之后输入命令：
```
$ java InfectStatistic list -date 2020-01-22 -log D:/log/ -out D:/output.txt
```
会读取D:/log/下的所有日志，然后处理日志和命令，在D盘下生成ouput.txt文件列出2020-01-22全国和所有省的情况（全国总是排第一个，别的省按拼音先后排序）
```
全国 感染患者22人 疑似患者25人 治愈10人 死亡2人
福建 感染患者2人 疑似患者5人 治愈0人 死亡0人
浙江 感染患者3人 疑似患者5人 治愈2人 死亡1人
// 该文档并非真实数据，仅供测试使用
```

list命令 支持以下命令行参数：

- `-log` 指定日志目录的位置，该项**必会附带**，请直接使用传入的路径，而不是自己设置路径
- `-out` 指定输出文件路径和文件名，该项**必会附带**，请直接使用传入的路径，而不是自己设置路径
- `-date` 指定日期，不设置则默认为所提供日志最新的一天。你需要确保你处理了指定日期之前的所有log文件
- `-type` 可选择[ip： infection patients 感染患者，sp： suspected patients 疑似患者，cure：治愈 ，dead：死亡患者]，使用缩写选择，如 `-type ip` 表示只列出感染患者的情况，`-type sp cure`则会按顺序【sp, cure】列出疑似患者和治愈患者的情况，不指定该项默认会列出所有情况。
- `-province` 指定列出的省，如`-province 福建`，则只列出福建，`-province 全国 浙江`则只会列出全国、浙江

注：java InfectStatistic表示执行主类InfectStatistic，list为**命令**，-date代表该命令附带的**参数**，-date后边跟着具体的**参数值**，如`2020-01-22`。-type 的多个参数值会用空格分离，每个命令参数都在上方给出了描述，每个命令都会携带一到多个命令参数


### 2、中期需求（30%）：
现有功能用了一段时间后发现需要增加功能，
#### （1）日志情况在原有基础上增加：
```
7、<省> 疑似患者 确诊感染 n人
8、<省> 排除 疑似患者 n人
```
如：
```
福建 疑似患者 确诊感染 2人
新疆 排除 疑似患者 5人
// 该文档并非真实数据，仅供测试使用
```
#### （2）要求能列出各个省的某日的增长情况：
```
$ java InfectStatistic incStat -date 2020-01-22 -log D:/log/ -out D:/output.txt
```
程序会读取D:/log/下的所有日志，然后处理日志和命令，在D盘下生成ouput.txt文件列出2020-01-22所有省的增长情况（全国总是排第一个，省按拼音先后排序）
```
全国 新增感染患者10人 新增疑似患者15人 新增治愈5人 新增死亡2人
福建 新增感染患者2人 新增疑似患者5人 新增治愈1人 新增死亡1人
浙江 新增感染患者3人 新增疑似患者5人 新增治愈2人 新增死亡0人
// 该文档并非真实数据，仅供测试使用
```

incStat命令 支持的命令行参数和list命令一致。

### 3、后期需求（20%）：
现有功能用了一段时间后发现，

#### （1）采用命令行输入很不方便，要求增加功能，指定命令文件，批量执行命令：
```
$ java InfectStatistic cmd -log D:/log/ -in D:/input.txt
```

cmd命令除了支持`-log`参数之外还支持 `-in`参数，并且必会传入`-in`参数，该参数用来指定输入的命令文件

程序会读取D:/log/下的所有日志，然后处理日志和命令，自动读取D盘下的input.txt文件，并将每一行作为命令输入并执行，默认命令都是正确的，不考虑错误的情况，文件中可以嵌套执行cmd，以下是示例input.txt
```
incStat -date 2020-01-22 -log D:/log/ -out D:/incStatOutput.txt -sp
list -date 2020-01-22 -log D:/log/ -out D:/listOutput.txt
cmd -log D:/log/ -in D:/cmd.txt
```


#### （2）对incStat命令增加新的选项：`-sp`
`-sp` 指令会在列出内容时增加疑似患者的确诊情况和排除情况，这两个新输出内容总是输出在最后
如：
```
$ java InfectStatistic incStat -date 2020-01-22 -log D:/log/ -out D:/output.txt -province 浙江 福建 -sp 
```
程序会读取D:/log/下的所有日志，然后处理日志和命令，在D盘下生成ouput.txt文件列出2020-01-22所有省的增长情况（省按拼音先后排序）
```
福建 新增感染患者2人 新增疑似患者5人 新增治愈1人 新增死亡1人 疑似患者确诊感染2人 排除疑似患者2人
浙江 新增感染患者3人 新增疑似患者5人 新增治愈3人 新增死亡0人 疑似患者确诊感染1人 排除疑似患者3人
// 该文档并非真实数据，仅供测试使用
```
